# Go CSP 实现原理

> 关于CSP原理，详细参考 《Go并发编程实战》，作者花了20多页的篇幅讲解这部分原理，不过需要配合Go源码理解。

Go CSP 模型 3个核心元素：

+ M: machine, 是工作线程，与内核线程一一对应。
+ P: processor,  代表一个Go代码片段执行所需要的资源（”上下文环境“）。
+ G: goroutine, 代表一个可运行的GO代码片段。

每个 P 都会包含一个可运行的 G 的队列，该队列中的 G 会被依次传递给与本地 P 关联的 M, 并获取运行时机。

![Go语言的线程实现模型]()

> P G 个人感觉说的都太抽象，个人认为 G 可以认为是一个任务 Task, P 是管理任务的容器，M 通过 P 获取任务。
>
> 上面的图片其实类似一个包含多个任务队列的线程池的实现，或者说是可任务偷取线程池的实现，比如 Java 的 ForkJoinPool。
>
> 补充：在《Go语言并发之道》C3 中看到一句话：验证了自己上面的感觉：
>
> “Go 语言遵循一个称为 fork-join 的并发模型。...”

